# Contributing

Thanks for contributing!

## Contents

- [Issues](#issues)
- [Contributing code](#contributing-code)
  - [NPM scripts](#npm-scripts)
  - [File tour](#file-tour)
    - [API report](#api-report)

## Issues

Issues about bug reports, feature requests and other questions are all welcome

## Contributing code

Thanks for contributing code!

1. Fork the GitHub repo
1. Install the [NPM] dependencies
   ```
   npm i
   ```
1. Use the beginning of this [guide](https://github.com/EmmaGoodliffe/transcribe-stt/blob/master/README.md#google-authentication) to generate an authentication key from GCP. Save it as `key.json`
1. Check that your environment is set up correctly
   ```
   npm test
   ```
1. Write some code using frequent commits. (See the [file tour](#file-tour) for an explanation of how the project works)
1. Optionally write some tests for your new code
1. Run a full build
   ```
   npm run build:all
   ```
1. Create a pull request

### NPM scripts

These are the useful NPM scripts

| Script      | Description                                                |
| ----------- | ---------------------------------------------------------- |
| `build:all` | Full build (download, build, generate documentation, lint) |
| `build`     | Build TypeScript                                           |
| `docs`      | Generate documentation                                     |
| `lint:fix`  | Fix linting problems                                       |
| `lint`      | Lint                                                       |
| `test`      | Test                                                       |
| `ts:types`  | Download and re-generate types from [GCP] documentation    |

### File tour

These are the important files

| Directory         | Description                                                                 |
| ----------------- | --------------------------------------------------------------------------- |
| `dist`            | Output `.js` and `.d.ts` files                                              |
| `docs/input`      | JSON [API report](#api-report) is copied here to be used by [API Extractor] |
| `docs/md`         | Output reference documentation generated by [API Extractor]                 |
| `etc`             | Output Markdown [API report](#api-report) generated by [API Extractor]      |
| `scripts/bash`    | Bash scripts used in production                                             |
| `scripts/ts`      | TypeScript scripts used in development                                      |
| `src`             | Source TypeScript files                                                     |
| `src/generated`   | Files generated by scripts in `scripts/ts` are copied here                  |
| `test`            | TypeScript [Jest] tests and any input files they require                    |
| `test/audio_dist` | Output audio from tests                                                     |
| `test/text_dist`  | Output text from tests                                                      |

#### API report

- The JSON API report is a JSON representation of the full module. It's used to generate the Markdown API report and the reference documentation
- The Markdown API report is a summary of everything exported by the module used by either developers or users to track changes to the module through the version history

[api extractor]: https://api-extractor.com/
[gcp]: https://cloud.google.com/
[jest]: https://jestjs.io/
[npm]: https://www.npmjs.com/
